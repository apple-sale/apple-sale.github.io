<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Apple Sale</title>
</head>
<body style="padding: 10px;margin: 0;">
    <div style="text-align:center">Percent: <input type="text" value="20"></div>
    <textarea style="width:100%; height:400px; border:3px #ccc solid; border-radius:5px; padding: 0; margin: 0;"></textarea>
    <p style="text-align:center"><button>SALE</button></p>
<script>
    document.querySelector('button').addEventListener('click', function (event) {
        var textarea = document.querySelector('textarea');
        var input = document.querySelector('input');
        var t = textarea.value;
        var p = parseInt(input.value);
        for (var i = 1; i <= 5000; i++) {
          var old = i.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            console.log(i + ((i * p) / 100), old, p);
          var price = (Math.ceil(i + ((i * p) / 100))).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
          console.log(price);
          var r = new RegExp('>' + old + ',00 USD', 'gi');
            t = t.replace(r, '>' + price + ',00 USD');
        }
        event.preventDefault();
        textarea.value = t;
        textarea.focus();
        textarea.select();
        document.execCommand('copy');
    });
</script>
</body>
</html>
